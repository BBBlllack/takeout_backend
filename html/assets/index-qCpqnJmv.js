import{c as B,a as L,m as x,b as _,p as q}from"./_plugin-vue_export-helper-5FnNDvxe.js";import{d as D,r as y,j as F,l as G,k as J,a as b}from"./index-zZCFLZ11.js";const[K,A]=B("text-ellipsis"),O={rows:L(1),dots:x("..."),content:x(""),expandText:x(""),collapseText:x(""),position:x("end")};var Q=D({name:K,props:O,emits:["clickAction"],setup(e,{emit:H}){const T=y(""),f=y(!1),p=y(!1),h=y(),E=F(()=>f.value?e.collapseText:e.expandText),N=u=>{if(!u)return 0;const v=u.match(/^\d*(\.\d*)?/);return v?Number(v[0]):0},k=()=>{const u=()=>{if(!h.value)return;const o=window.getComputedStyle(h.value),t=document.createElement("div");return Array.prototype.slice.apply(o).forEach(a=>{t.style.setProperty(a,o.getPropertyValue(a))}),t.style.position="fixed",t.style.zIndex="-9999",t.style.top="-9999px",t.style.height="auto",t.style.minHeight="auto",t.style.maxHeight="auto",t.innerText=e.content,document.body.appendChild(t),t},v=(o,t)=>{const{content:l,position:a,dots:m}=e,d=l.length,j=()=>{const n=(s,c)=>{if(c-s<=1)return a==="end"?l.slice(0,s)+m:m+l.slice(c,d);const i=Math.round((s+c)/2);return a==="end"?o.innerText=l.slice(0,i)+m+E.value:o.innerText=m+l.slice(i,d)+E.value,o.offsetHeight>t?a==="end"?n(s,i):n(i,c):a==="end"?n(i,c):n(s,i)};o.innerText=n(0,d)},w=(n,s)=>{if(n[1]-n[0]<=1&&s[1]-s[0]<=1)return l.slice(0,n[0])+m+l.slice(s[1],d);const c=Math.floor((n[0]+n[1])/2),i=Math.ceil((s[0]+s[1])/2);return o.innerText=e.content.slice(0,c)+e.dots+e.content.slice(i,d)+e.expandText,o.offsetHeight>=t?w([n[0],c],[i,s[1]]):w([c,n[1]],[s[0],i])},M=0+d>>1;return e.position==="middle"?o.innerText=w([0,M],[M,d]):j(),o.innerText},r=u();if(!r)return;const{paddingBottom:z,paddingTop:I,lineHeight:V}=r.style,C=Math.ceil((Number(e.rows)+.5)*N(V)+N(I)+N(z));C<r.offsetHeight?(p.value=!0,T.value=v(r,C)):(p.value=!1,T.value=e.content),document.body.removeChild(r)},g=u=>{f.value=!f.value,H("clickAction",u)},S=()=>b("span",{class:A("action"),onClick:g},[E.value]);return G(k),J(()=>[e.content,e.rows,e.position],k),_("resize",k),()=>b("div",{ref:h,class:A()},[f.value?e.content:T.value,p.value?S():null])}});const W=q(Q);export{W as T};
