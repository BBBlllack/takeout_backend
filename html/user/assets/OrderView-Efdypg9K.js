import{d as R,a as o,r as y,j as I,k as U,n as K,m as Y,x as J,y as Q,l as W,c as S,f as C,w as i,F as B,o as w,q as N,t as V,b as E,s as z}from"./index-zZCFLZ11.js";import{L as X}from"./index-czKaxq1b.js";import{c as A,x as Z,q as F,B as ee,t as P,p as q,h as ae,y as j,n as te,z as ne,A as le,D as oe,E as se,r as D,C as G,F as $,G as re,_ as ce}from"./_plugin-vue_export-helper-5FnNDvxe.js";import{C as de}from"./index-55z86Umy.js";import{S as ie}from"./index-HSX_429G.js";import{T as ue}from"./index-tR9qsMEz.js";import{I as ve}from"./index-YeEeOT41.js";import{T as fe}from"./TabView-QRqBeXqu.js";const[H,pe]=A("collapse"),M=Symbol(H),me={border:P,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var _e=R({name:H,props:me,emits:["change","update:modelValue"],setup(s,{emit:m,slots:a}){const{linkChildren:r,children:_}=Z(M),u=e=>{m("change",e),m("update:modelValue",e)},b=(e,t)=>{const{accordion:n,modelValue:v}=s;u(n?e===v?"":e:t?v.concat(e):v.filter(f=>f!==e))},c=(e={})=>{if(s.accordion)return;typeof e=="boolean"&&(e={expanded:e});const{expanded:t,skipDisabled:n}=e,f=_.filter(p=>p.disabled&&n?p.expanded.value:t??!p.expanded.value).map(p=>p.itemName.value);u(f)},g=e=>{const{accordion:t,modelValue:n}=s;return t?n===e:n.includes(e)};return F({toggleAll:c}),r({toggle:b,isExpanded:g}),()=>{var e;return o("div",{class:[pe(),{[ee]:s.border}]},[(e=a.default)==null?void 0:e.call(a)])}}});const ge=q(_e),[he,O]=A("collapse-item"),ye=["icon","title","value","label","right-icon"],be=ae({},j,{name:te,isLink:P,disabled:Boolean,readonly:Boolean,lazyRender:P});var xe=R({name:he,props:be,setup(s,{slots:m}){const a=y(),r=y(),{parent:_,index:u}=ne(M);if(!_)return;const b=I(()=>{var l;return(l=s.name)!=null?l:u.value}),c=I(()=>_.isExpanded(b.value)),g=y(c.value),e=le(()=>g.value||!s.lazyRender),t=()=>{c.value?a.value&&(a.value.style.height=""):g.value=!1};U(c,(l,k)=>{if(k===null)return;l&&(g.value=!0),(l?K:se)(()=>{if(!r.value||!a.value)return;const{offsetHeight:h}=r.value;if(h){const T=`${h}px`;a.value.style.height=l?"0":T,oe(()=>{a.value&&(a.value.style.height=l?T:"0")})}else t()})});const n=(l=!c.value)=>{_.toggle(b.value,l)},v=()=>{!s.disabled&&!s.readonly&&n()},f=()=>{const{border:l,disabled:k,readonly:L}=s,h=D(s,Object.keys(j));return L&&(h.isLink=!1),(k||L)&&(h.clickable=!1),o(G,Y({role:"button",class:O("title",{disabled:k,expanded:c.value,borderless:!l}),"aria-expanded":String(c.value),onClick:v},h),D(m,ye))},p=e(()=>{var l;return J(o("div",{ref:a,class:O("wrapper"),onTransitionend:t},[o("div",{ref:r,class:O("content")},[(l=m.default)==null?void 0:l.call(m)])]),[[Q,g.value]])});return F({toggle:n,expanded:c,itemName:b}),()=>o("div",{class:[O({border:u.value&&s.border})]},[f(),p()])}});const ke=q(xe),Le={class:"list"},Ce={class:"order-item"},we={class:"order-item-title"},Te=R({__name:"OrderView",setup(s){const m=["已下单","已出餐","已完成"],a=y({records:[],total:20,current:1,size:10}),r=y(!0),_=y(!1),u=async()=>{if(console.log("load"),a.value.records.length>=a.value.total){_.value=!0;return}r.value=!0,a.value.current++;const t=await $(a.value.current,a.value.size);a.value.records.push(...t.records),r.value=!1},b=async()=>{console.log("refresh"),r.value=!0;const t=await $(1,10);console.log(t),a.value=t,a.value.current=1,r.value=!1},c=y([]),g=async t=>{console.log(t);const n=await re(t.id);c.value=n},e=y(1);return W(()=>{console.log("order"),b()}),(t,n)=>{const v=ve,f=ue,p=ie,l=G,k=de,L=ke,h=ge,T=X;return w(),S(B,null,[C("div",Le,[o(T,{loading:r.value,"onUpdate:loading":n[1]||(n[1]=d=>r.value=d),finished:_.value,"finished-text":"没有更多了",onLoad:u},{default:i(()=>[(w(!0),S(B,null,N(a.value.records,d=>(w(),z(h,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=x=>e.value=x),accordion:"",key:d.id,onClick:x=>g(d)},{default:i(()=>[o(L,{name:d.id},{title:i(()=>[C("div",Ce,[o(v,{fit:"cover",round:"",class:"order-item-img",src:d.restaurant.cover,alt:""},null,8,["src"]),C("div",we,[C("div",null,V(d.restaurant.name),1),C("div",null,[o(p,null,{default:i(()=>[o(f,{type:"primary"},{default:i(()=>[E(V(d.create_time),1)]),_:2},1024),o(f,{type:"warning"},{default:i(()=>[E("¥"+V(d.totalprice),1)]),_:2},1024),o(f,{type:"success"},{default:i(()=>[E(V(m[d.status]),1)]),_:2},1024)]),_:2},1024)])])])]),default:i(()=>[o(k,null,{default:i(()=>[(w(!0),S(B,null,N(c.value,x=>(w(),z(l,{key:x.id,title:x.dish.name,label:x.price+"¥",value:x.quantity+"份",center:"",style:{"background-color":"#f7f8fa"},border:""},{icon:i(()=>[o(v,{fit:"cover",round:"",class:"order-item-img",src:d.restaurant.cover,alt:""},null,8,["src"])]),_:2},1032,["title","label","value"]))),128))]),_:2},1024)]),_:2},1032,["name"])]),_:2},1032,["modelValue","onClick"]))),128))]),_:1},8,["loading","finished"])]),o(fe)],64)}}}),Ne=ce(Te,[["__scopeId","data-v-2b1ffa9a"]]);export{Ne as default};
