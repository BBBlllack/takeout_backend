import{g as Z,h as G,d as F,r as _,i as Q,j as V,k as O,a as i,n as W,m as Y,l as ee,c as E,w as g,f as x,F as P,o as C,q as A,s as D,t as B,b as j,v as te}from"./index-zZCFLZ11.js";import{L as oe}from"./index-czKaxq1b.js";import{i as ne,o as se,c as K,n as ae,m as L,a as H,u as ce,b as re,d as U,e as T,w as le,f as ie,g as ue,h as N,j as de,k as fe,p as M,t as ve,q as he,r as q,s as me,v as $,C as pe,_ as ge}from"./_plugin-vue_export-helper-5FnNDvxe.js";import{T as _e}from"./index-qCpqnJmv.js";import{T as we}from"./index-tR9qsMEz.js";/* empty css              */import{f as J,u as be,F as ke}from"./index-rzXRHUq0.js";import{T as xe}from"./TabView-QRqBeXqu.js";import{S as ye,a as Ie}from"./index-SG0VCoox.js";function Ce(o,a){if(!ne||!window.IntersectionObserver)return;const c=new IntersectionObserver(e=>{a(e[0].intersectionRatio>0)},{root:document.body}),n=()=>{o.value&&c.observe(o.value)},l=()=>{o.value&&c.unobserve(o.value)};Z(l),G(l),se(n)}const[Se,Te]=K("sticky"),Re={zIndex:ae,position:L("top"),container:Object,offsetTop:H(0),offsetBottom:H(0)};var Ve=F({name:Se,props:Re,emits:["scroll","change"],setup(o,{emit:a,slots:c}){const n=_(),l=ce(n),e=Q({fixed:!1,width:0,height:0,transform:0}),m=_(!1),v=V(()=>ue(o.position==="top"?o.offsetTop:o.offsetBottom)),b=V(()=>{if(m.value)return;const{fixed:s,height:w,width:d}=e;if(s)return{width:`${d}px`,height:`${w}px`}}),y=V(()=>{if(!e.fixed||m.value)return;const s=N(de(o.zIndex),{width:`${e.width}px`,height:`${e.height}px`,[o.position]:`${v.value}px`});return e.transform&&(s.transform=`translate3d(0, ${e.transform}px, 0)`),s}),u=s=>a("scroll",{scrollTop:s,isFixed:e.fixed}),h=()=>{if(!n.value||U(n))return;const{container:s,position:w}=o,d=T(n),I=fe(window);if(e.width=d.width,e.height=d.height,w==="top")if(s){const f=T(s),p=f.bottom-v.value-e.height;e.fixed=v.value>d.top&&f.bottom>0,e.transform=p<0?p:0}else e.fixed=v.value>d.top;else{const{clientHeight:f}=document.documentElement;if(s){const p=T(s),k=f-p.top-v.value-e.height;e.fixed=f-v.value<d.bottom&&f>p.top,e.transform=k<0?-k:0}else e.fixed=f-v.value<d.bottom}u(I)};return O(()=>e.fixed,s=>a("change",s)),re("scroll",h,{target:l,passive:!0}),Ce(n,h),O([le,ie],()=>{!n.value||U(n)||!e.fixed||(m.value=!0,W(()=>{const s=T(n);e.width=s.width,e.height=s.height,m.value=!1}))}),()=>{var s;return i("div",{ref:n,style:b.value},[i("div",{class:Te({fixed:e.fixed&&!m.value}),style:y.value},[(s=c.default)==null?void 0:s.call(c)])])}}});const Ee=M(Ve),[Pe,S,Be]=K("search"),$e=N({},J,{label:String,shape:L("square"),leftIcon:L("search"),clearable:ve,actionText:String,background:String,showAction:Boolean});var Le=F({name:Pe,props:$e,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(o,{emit:a,slots:c,attrs:n}){const l=be(),e=_(),m=()=>{c.action||(a("update:modelValue",""),a("cancel"))},v=t=>{t.keyCode===13&&(me(t),a("search",o.modelValue))},b=()=>o.id||`${l}-input`,y=()=>{if(c.label||o.label)return i("label",{class:S("label"),for:b()},[c.label?c.label():o.label])},u=()=>{if(o.showAction){const t=o.actionText||Be("cancel");return i("div",{class:S("action"),role:"button",tabindex:0,onClick:m},[c.action?c.action():t])}},h=()=>{var t;return(t=e.value)==null?void 0:t.blur()},s=()=>{var t;return(t=e.value)==null?void 0:t.focus()},w=t=>a("blur",t),d=t=>a("focus",t),I=t=>a("clear",t),f=t=>a("clickInput",t),p=t=>a("clickLeftIcon",t),k=t=>a("clickRightIcon",t),R=Object.keys(J),r=()=>{const t=N({},n,q(o,R),{id:b()}),z=X=>a("update:modelValue",X);return i(ke,Y({ref:e,type:"search",class:S("field",{"with-message":t.errorMessage}),border:!1,onBlur:w,onFocus:d,onClear:I,onKeypress:v,onClickInput:f,onClickLeftIcon:p,onClickRightIcon:k,"onUpdate:modelValue":z},t),q(c,["left-icon","right-icon"]))};return he({focus:s,blur:h}),()=>{var t;return i("div",{class:S({"show-action":o.showAction}),style:{background:o.background}},[(t=c.left)==null?void 0:t.call(c),i("div",{class:S("content",o.shape)},[y(),r()]),u()])}}});const Fe=M(Le),Ne={class:"list"},ze=["src"],Oe=["src"],Ae={class:"item-right"},De={style:{"font-size":"1.2rem",color:"#333"}},je={style:{"font-size":"1rem",color:"#666"}},He=F({__name:"HomeView",setup(o){const a=_(""),c=_(["https://khh.travel/content/images/static/4-1-food-11.jpg","https://v3-statics.mirrormedia.mg/images/b05fd709-ce04-4b07-aa0e-12640f0edb2e-w800.webP","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRxIpOcBEUt1rvNeoxXZQ0m8JsEkpO5-yXJVw&s"]),n=_({records:[],total:100,size:10,current:1}),l=_(!1),e=_(!1),m=async()=>{l.value=!0,n.value.current++;const u=await $(n.value.current,n.value.size);n.value.records.length>=n.value.total?e.value=!0:n.value.records.push(...u.records),l.value=!1},v=async u=>{e.value=!1,l.value=!0,console.log(u);const h=await $(1,10,u);n.value=h,l.value=!1},b=async()=>{l.value=!0;const u=await $(1,10,a.value);n.value=u,l.value=!1},y=u=>{te.push(`/restaurant/${u.id}`)};return ee(()=>{b()}),(u,h)=>{const s=Fe,w=Ee,d=Ie,I=ye,f=we,p=_e,k=pe,R=oe;return C(),E(P,null,[i(w,null,{default:g(()=>[i(s,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=r=>a.value=r),shape:"round",background:"linear-gradient(to right, #ffeecc, #2211FF)",placeholder:"请输入搜索关键词",onSearch:v},null,8,["modelValue"])]),_:1}),x("div",Ne,[i(I,{autoplay:3e3,"lazy-render":""},{default:g(()=>[(C(!0),E(P,null,A(c.value,r=>(C(),D(d,{key:r},{default:g(()=>[x("img",{class:"swipe-img",src:r},null,8,ze)]),_:2},1024))),128))]),_:1}),i(R,{loading:l.value,"onUpdate:loading":h[1]||(h[1]=r=>l.value=r),finished:e.value,"finished-text":"没有更多了",onLoad:m},{default:g(()=>[(C(!0),E(P,null,A(n.value.records,r=>(C(),D(k,{class:"item",key:r.id,onClick:t=>y(r)},{icon:g(()=>[x("img",{src:r.cover,alt:"",style:{width:"25vw",height:"25vw","border-radius":"3vw"}},null,8,Oe)]),default:g(()=>[x("div",Ae,[x("div",De,B(r.name),1),x("div",je,[i(f,{type:"danger",style:{"margin-right":"1vw","font-size":"0.8rem"}},{default:g(()=>[j(" 月销 "+B(r.sale),1)]),_:2},1024),i(f,{type:"warning",style:{"margin-right":"1vw","font-size":"0.8rem"}},{default:g(()=>[j(" 评分 "+B(r.mark),1)]),_:2},1024),i(p,{content:r.announce},null,8,["content"])])])]),_:2},1032,["onClick"]))),128))]),_:1},8,["loading","finished"])]),i(xe)],64)}}}),We=ge(He,[["__scopeId","data-v-914d660c"]]);export{We as default};
